# Obsidian Zettelkasten 插件

这是一个用于增强 Obsidian 中 Zettelkasten 笔记方法的插件。该插件旨在提供更好的笔记管理和组织功能。

## 功能特性

### 1. 主盒笔记别名显示
- 在主盒（指定文件夹）中的笔记，根据 frontmatter 属性（如 alias）增强显示
- 文件资源管理器中显示格式为"{文件名}:{属性值}"
- Canvas 视图中仅显示"{属性值}"，不显示文件名
- 支持配置多个显示属性（如 alias、title 等），按优先级显示第一个非空属性
- 通过 DOM 监听实现实时更新，兼容所有文件操作场景
- 仅影响显示，不修改实际文件名

### 2. 主卡 ID 自动生成
- 支持在主盒中自动生成符合分段数字 ID 规则的主卡
- 右键菜单提供"新建兄弟主卡"和"新建子主卡"两个选项
- 新建兄弟主卡时：
  - 自动计算相邻主卡编号的平均值作为新编号
  - 确保编号分段和层级正确
- 新建子主卡时：
  - 自动插入到所有子主卡之前
  - 使用"0"和最小子主卡编号的中间值
- 支持无限层级的主卡 ID 生成
- 采用数值排序确保顺序正确，避免字典序问题

## 开发计划
1. 基础框架搭建 ✅
2. 实现主盒笔记别名显示增强功能 ✅
3. 添加设置面板，支持自定义配置 ✅
4. 实现主卡 ID 自动生成功能（已修复排序与插入问题） ✅

## 技术栈
- TypeScript
- Obsidian API
- MutationObserver 劫持 DOM

## 安装方法
1. 在 Obsidian 的社区插件市场中搜索 "Zettelkasten"
2. 点击安装
3. 在设置中启用插件

## 使用方法

### 主盒笔记别名显示
1. 在插件设置中指定主盒文件夹路径（如 Antinet/主盒）
2. 配置需要显示的笔记属性（如 alias、title 等，支持多个属性，逗号分隔）
3. 插件会自动处理主盒文件夹中所有笔记的显示名称，无需手动刷新
4. 支持折叠/展开、文件增删改、面板切换等所有场景
5. 在 Canvas 视图中，笔记标题将仅显示属性值，不显示文件名

### 主卡 ID 自动生成
1. 在插件设置中启用"主卡 ID 生成"功能
2. 在主盒文件夹中的主卡上右键点击
3. 选择以下操作之一：
   - "新建兄弟主卡"：在同一父级下的兄弟主卡之间创建新主卡，编号分段和层级始终正确
   - "新建子主卡"：总是插入到所有已有子主卡之前，编号为"0"和最小子主卡编号的中间值
4. 插件会自动生成新的 ID 并创建文件
5. 创建成功后会在右下角显示提示信息


## 注意事项
- 主盒笔记别名显示功能只影响文件资源管理器和 Canvas 的显示，不影响实际文件名和引用
- 文件资源管理器中显示格式为"{文件名}:{属性值}"，Canvas 中仅显示"{属性值}"
- 若 frontmatter 中无指定属性，则只显示原始文件名
- 若主盒路径设置错误或为空，则功能不会生效
- 主卡 ID 生成功能需要确保主盒路径正确设置
- 新建主卡时，请确保当前主卡的 ID 符合分段数字 ID 规则
- 插件已修复字典序与编号数值排序不一致导致的插入顺序问题，保证主卡树结构始终清晰、正确
- 建议不要创建过深层级的主卡，以保持笔记结构的清晰性

## 许可证
MIT License 